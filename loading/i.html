<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<div>a long story will coming...<input type="button" onclick="foo()" value="load" /></div>
<script type="text/javascript">

// ref: http://www.cnblogs.com/qiuyan/archive/2013/05/05/3060864.html

function loading() {
	var over = document.getElementById("loading-over");
	if (over === null) {
		var d = document.createElement("div");
		d.innerHTML = '<div id="loading-over" style="display:none;position:absolute;top:0;left:0;height:100%;width:100%;opacity:0.8;z-index:1000;background-color:#F5F5F5;" ></div><div id="loading-msg" style="display:none;position:absolute;top:40%;left:40%;height:20%;width:20%;z-index:1001;text-align:center;font-size:200%;" >loading...</div>';
		document.body.appendChild(d);
		over = document.getElementById("loading-over");
	}

	over.style.display = "block";

	var msg = document.getElementById("loading-msg");
	msg.style.display = "block";
}

function hiding() {
	var msg = document.getElementById("loading-msg");
	if (msg !== null) {
		msg.style.display = "none";
	}

	var over = document.getElementById("loading-over");
	if (over !== null) {
		over.style.display = "none";
	}
}

function foo() {
	loading();
	setTimeout(hiding, 3000);
}
</script>
</body>
</html>
